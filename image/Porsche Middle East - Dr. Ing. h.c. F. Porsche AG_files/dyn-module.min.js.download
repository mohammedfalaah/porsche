(function(n,t,i){"use strict";function c(i,o,s){var h=n(i),c,l=h.attr("data-dynmod-reloaded");s&&t.PC.isFlaggedInitialized(i)===!0&&l!=="true"||(t.PC.flagInitialized(i),c=new f(_.extend({name:r},h.data("model")||{},{index:o})),u.push(new e({el:h,model:c})))}var s=n(t),r="m-03",f,e,u=[],o,h=!!n("html.ie8").length;t.PC.register("."+r,c.bind(this));i.addEventListener("fuel-economy.reinit",function(){for(var n=0;n<u.length;n++)u[n].reInitEco()});f=ModuleBaseModel.extend({});e=ModuleBaseView.extend({breakpointState:-1,columnsSelector:".m-03-related-links .m-03-column",eventData:{},relatedLinks:null,timeOut:null,events:{"click .m-03-more-about a":"_onMoreAboutLinkClick","click .m-03-related-links .m-03-related-links-acc-link-content > li > a":"_onRelatedLinkClick","mouseenter .b-sharepanel":"_onSharePanelHover",'click a[class^="gui-btn-sm-"]':"_onSocialIconClick","select2-open .m-03-change-country select, .m-03-select-language select":"_onCountrySelectorSelectOpenClick","change .m-03-change-country select, .m-03-select-language select":"_onCountrySelectorSelectOptionChanged","click .m-03-copyright a":"_onLegalLinkClick","click .m-03-legal-notice-marks a":"_onDisclaimerLinkClick","click .m-03-footer-logo-link":"_onFooterLogoLinkClick"},initialize:function(n){ModuleBaseView.prototype.initialize.apply(this,[n]);this.trackEnterViewport();this.render()},reInitEco:function(){this.initEcoContainerTracking()},render:function(){if(ModuleBaseView.prototype.render.apply(this,arguments),this.relatedLinks||(this.relatedLinks=new o({el:this.$el.find("."+r+"-related-links")})),!h){s.on("resize"+r+"-footer",function(){t.clearTimeout(this.timeOut);this.timeOut=t.setTimeout(function(){this._resizeFooterColumns()},100)});this._resizeFooterColumns()}this.eventData.context={moduleId:this.model.getId()};this.moduleLoaded();this.$el.find(".b-sharepanel .b-sharing").data("callback",_.bind(function(n,t,i){this._onSharePanelLinkClick(n,t,i)},this))},_gdlTracking:function(t,i,r,u,f,e,o,s){var h,l,c,a;GDL&&(h=n(t.currentTarget),l=this.model.getId()+"_"+(f||r)+"_"+(e||h.parent().children(i).index(h)),c=JSON.parse(JSON.stringify(this.eventData)),s=s||h.attr("href"),o=o||h.attr("title")||n.trim(h.text().replace(/(\r\n|\n|\r)/gm,""))||e||l,a=s&&GDL.ext.CarDataHelper.byUrl(s),a&&(c.car=a),c.componentClick={clickElementId:l,clickElementName:o,clickElementType:r,targetUrl:s},GDL.push("PAGPCOM_Footer"+u,c))},_onMoreAboutLinkClick:function(n){this._gdlTracking(n,"a","link","MoreAbout_Click","more-about-link")},_onRelatedLinkClick:function(t){var i=n(t.currentTarget),r=i.parents("ul"),u=i.parents(".m-03-column").find("> div:first"),f=_.tryParseInt(r.attr("id").replace(/m-03-related-links-(\d*)-content/,"$1"),1)-1,e=r.children().index(i.parent())||0;this._gdlTracking(t,"a","link","RelatedLink_Click","related-link",f+"_"+e,n.trim(u.text().replace(/(\r\n|\n|\r)/gm,""))+" | "+n.trim(i.text().replace(/(\r\n|\n|\r)/gm,"")))},_onSharePanelHover:function(t){var r=n(t.currentTarget),i=JSON.parse(JSON.stringify(this.eventData));i.pageExperience={contentId:this.model.getId()+"_share",contentName:n.trim(r.text().replace(/(\r\n|\n|\r)/gm,"")).replace(/ {2,}/g,"|")};GDL&&GDL.push("PAGPCOM_FooterShareTooltip_Load",i)},_onSharePanelLinkClick:function(n,t,i){this._gdlTracking({currentTarget:n},".b-sharing","icon","Share_Click","share",t,t.toLowerCase(),i)},_onSocialIconClick:function(n){this._gdlTracking(n,"a","icon","PorscheSocial_Click","social",_.getValueByName("target.className",n,"unknown").replace("gui-btn-sm-","").toLowerCase())},_onCountrySelectorSelectOpenClick:function(t){var i=n(t.currentTarget),r,u=this.model.getId()+"_select_",e=n.trim(i.data("placeholder").replace(/(\r\n|\n|\r)/gm,"")),f=JSON.parse(JSON.stringify(this.eventData));i.parents(".m-03-change-country").length>0&&(r="RegionSelector",u+="region");i.parents(".m-03-select-language").length>0&&(r="CountrySelector",u+="country");f.componentClick={clickElementId:u,clickElementName:e,clickElementType:"select"};GDL&&GDL.push("PAGPCOM_Footer"+r+"Open_Click",f)},_onCountrySelectorSelectOptionChanged:function(t){var u=n(t.currentTarget),e=u.find("option.selected"),i,r=this.model.getId()+"_option_",s=n.trim(e.text().replace(/(\r\n|\n|\r)/gm,"")),f=e.val(),o=JSON.parse(JSON.stringify(this.eventData));f&&(u.parents(".m-03-change-country").length>0&&(i="RegionSelectorRegion",r+="region"),u.parents(".m-03-select-language").length>0&&(i="CountrySelectorCountry",r+="country"),r+="_"+f.replace(/(^\/|_|\/$)/g,"").replace(/\//g,"_"),o.componentClick={clickElementId:r,clickElementName:s,clickElementType:"option",targetUrl:i==="CountrySelectorCountry"?f:undefined},GDL&&GDL.push("PAGPCOM_Footer"+i+"_Click",o))},_onLegalLinkClick:function(t){n(t.currentTarget).hasClass("gui-btn")?this._gdlTracking(t,"a","button","BasicButton_Click","footer-button"):this._gdlTracking(t,"a","link","LegalLink_Click","legal-link")},_onDisclaimerLinkClick:function(n){this._gdlTracking(n,"a","link","DisclaimerLink_Click","disclaimer-link")},_onFooterLogoLinkClick:function(n){this._gdlTracking(n,"a","logo","Logo_Click","footer-logo-link")},_getCurrentBreakpoint:function(){return n(".m-03-related-links-acc-link").css("border-bottom-width")==="1px"?0:1},_resizeColumns:function(){var t=0,i=0;n(this.columnsSelector).each(function(r,u){var f=n(u);f.css({height:"auto"});r<2?t=Math.max(t,f.outerHeight()):i=Math.max(i,f.outerHeight())});n(this.columnsSelector).each(function(r,u){var f=n(u);r<2?f.css({height:t}):f.css({height:i})})},_resizeFooterColumns:function(){this.breakpointState=this._getCurrentBreakpoint();this.breakpointState===1?this._resizeColumns():n(this.columnsSelector).removeAttr("style")}});o=BaseView.extend({$context:null,initialize:function(n){BaseView.prototype.initialize.apply(this,[n]);this.render()},render:function(){BaseView.prototype.render.apply(this,arguments);this.$context=this.$el.find("."+r+"-context");this.initializeAccordions()},initializeAccordions:function(){this.$context.length>0&&this.$context.accordion&&this.$context.accordion({accordionLinkSelector:"."+r+"-related-links-acc-link",accordionContent:"."+r+"-related-links-acc-link-content",closeOpenAccordions:!0,breakpoint:568,scrollDuration:500,alwaysToggleActiveState:!0,ignoreBreakpoints:!1,scrollToContent:!1,scrollToHeadline:!0,checkEventClass:!1,contentSuffix:"-content"})}})})(jQuery,this,this.document)